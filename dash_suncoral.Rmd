---
title: "Monitoramento Sun Coral PACS"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
---

```{r setup, include=FALSE}
library(flexdashboard)
library(readr)
library(reshape2)
library(leaflet)
library(ggplot2)
library(vegan)
library(plotly)
library(lubridate)
library(dplyr)
library(sf)
library(crosstalk)


library(RColorBrewer)
palette(brewer.pal(8, "Set2"))
```
```{r dataread, include=FALSE}

shape_data <- st_read("c//../shp/dafor.shp")
summary(shape_data)


```

Map
======================================================================

### REBIO Arvoredo e Entorno 2023

```{r map}
#https://epsg.io/

#epsg4326 <- leafletCRS(
 #crsClass = "L.Proj.CRS",
  #code = "EPSG:4326",
  #proj4def = "+proj=longlat +datum=WGS84 +no_defs +type=crs",
  #resolutions = 2^(16:7))


#leaflet(options = leafletOptions(worldCopyJump = F, crs = epsg4326)) %>%
  #addTiles() %>%
  #addPolylines(data = shape_data) %>%   
  #addMiniMap(toggleDisplay = T)


#select features to display based on date ...


shape_data <- shape_data %>% 
  dplyr::mutate( date2 = as.numeric( as.Date( data )),
                 date3 = as.Date( data ))


shared_data <- SharedData$new(shape_data)

filter_slider("data","Data", shared_data, ~data, width = "100%")

leaflet(shared_data, width = "100%", height = 800) %>%
  leaflet::addTiles() %>%
  leaflet::addPolylines(data = shape_data) 





#https://stackoverflow.com/questions/62849300/r-leaflet-add-a-range-slider-to-filter-markers-without-shiny


leaflet() %>%
  addTiles() %>%
  addPolylines(data = shape_data) %>% 
  addMiniMap(toggleDisplay = T)









##https://rstudio.github.io/leaflet/showhide.html

### feijao com arroz
leaflet() %>%
  addTiles() %>%
  addPolylines(data = shape_data) %>% 
  addMiniMap(toggleDisplay = T)


```

